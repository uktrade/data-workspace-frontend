{% extends '_main.html' %}

{% block breadcrumbs %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-three-quarters">
      <div class="govuk-breadcrumbs">
        <ol class="govuk-breadcrumbs__list">
          <li class="govuk-breadcrumbs__list-item">
            <a class="govuk-breadcrumbs__link" href="/">Home</a>
          </li>
          <li class="govuk-breadcrumbs__list-item">
            <a href="{{ object.dataset.get_absolute_url }}">
              {{ object.dataset.name }}
            </a>
          </li>
          <li class="govuk-breadcrumbs__list-item">
            Review
          </li>
        </ol>
      </div>
    </div>
  </div>
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">Please review your selections
      </h1>


      <div class="govuk-form-group">
        <h2 class="govuk-heading-m">What changes would you like to get emails about?</h2>
        <dl class="govuk-summary-list govuk-summary-list--no-border">


          {% for option in object.get_list_of_selected_options %}
            <div class="govuk-summary-list__row">
              <dd class="govuk-summary-list__value">
                {{ option }}
              </dd>
              <dd class="govuk-summary-list__actions">
                <a class="govuk-link" href="{% url "datasets:subscription_options" object.id %}">
                  Change<span class="govuk-visually-hidden"> name</span>
                </a>
              </dd>
            </div>
          {% empty %}
            <div class="govuk-summary-list__row">
              <dd class="govuk-summary-list__value">
                You have not selected any options
              </dd>
              <dd class="govuk-summary-list__actions">
                <a class="govuk-link" href="{% url "datasets:subscription_options" object.id %}">
                  Change<span class="govuk-visually-hidden"> name</span>
                </a>
              </dd>
            </div>
          {% endfor %}

        </dl>
      </div>

      <form method="post">
        {% csrf_token %}
        <input type="hidden" name="{{ form.notify_on_data_change.name }}" value="{{ form.notify_on_data_change.value }}" />
        <input type="hidden" name="{{ form.notify_on_schema_change.name }}" value="{{ form.notify_on_schema_change.value }}" />
        <div class="form-group">
          <div class="govuk-form-group">
            <label class="govuk-label" for="email-address">
              Email address
            </label>

            <input class="govuk-input govuk-input--width-20" id="email-address"
                   value="{{ user.email }}" disabled
                   name="emailAddress" type="text" required>
          </div>
        </div>

        <div class="govuk-form-group">
          <button type="submit" class="govuk-button">Submit</button>

        </div>
      </form>
    </div>


  </div>
{% endblock %}