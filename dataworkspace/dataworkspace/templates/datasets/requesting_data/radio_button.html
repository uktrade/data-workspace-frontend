{% extends '_main.html' %}

{% load waffle_tags %}

{% block page_title %}Request a new dataset - {{ block.super }}{% endblock page_title %}
{% block breadcrumbs %}
<a href="{{ backlink }}" class="govuk-back-link">Back</a>
{% endblock %}
{% block content %}

{% if form.errors %}
  <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
    <h2 class="govuk-error-summary__title" id="error-summary-title">
      There is a problem
    </h2>
    <div class="govuk-error-summary__body">
      <ul class="govuk-list govuk-error-summary__list">
      {% for field, errors in form.errors.items %}
          {% for error in errors %}
              <li>
              <a href="#id_{{ field }}">{{ error }}</a>
              </li>
          {% endfor %}
      {% endfor %}
      </ul>
    </div>
  </div>
{% endif %}

<h1 class="govuk-heading-l">{{ stage }}</h1>

<form method="post" novalidate>
  {% csrf_token %}
    {{ wizard.management_form }}
      <!-- {{ wizard.form.management_form }} -->
      {% for field in form %}
        {{ field }}
      {% endfor %}
  <button type="submit" class="govuk-button" data-module="govuk-button">
    Continue
  </button>
</form>

<p class="govuk-body">
  <a href="{{ link }}" class="govuk-link">{{ link_text }}</a>
</p>

<script nonce="{{ request.csp_nonce }}">
  document.addEventListener('DOMContentLoaded', () => {
    const yesButton = document.getElementsByClassName("govuk-radios__input")[0].addEventListener("click", showInput);
    const noButton = document.getElementsByClassName("govuk-radios__input")[1].addEventListener("click", hideInput);
    const input = document.getElementsByClassName("govuk-form-group")[1]

    function showInput() {
      input.style.display = "";
    };
    function hideInput() {
      input.style.display = "none";
    };
  });
</script>

{% endblock %}

