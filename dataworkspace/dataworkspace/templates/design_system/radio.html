{% with id=widget.attrs.id %}
<div class="govuk-form-group {% if widget.errors %}govuk-form-group--error{% endif %}">
  <fieldset{% if id %} id="{{ id }}"{% endif %} class="govuk-fieldset">
      <legend class="govuk-fieldset__legend govuk-fieldset__legend--{{ widget.label_size }}">
        <{{ widget.heading }} class="{% if widget.extra_label_classes %}{{ widget.extra_label_classes }}{% else %}govuk-fieldset__heading{% endif %}">{{ widget.label }}</{{ widget.heading }}>
      </legend>

      {% if widget.help_html %}
        <div id="{{ id }}-hint">
        {{ widget.help_html }}
      </div>
      {% elif widget.help_text %}
      <span id="{{ id }}-hint" class="govuk-hint">
        {{ widget.help_text }}
      </span>
      {% endif %}

      {% if widget.errors %}
      <span id="{{ id }}-error" class="govuk-error-message">
          <span class="govuk-visually-hidden">Error: </span>{{ widget.errors.0 }}
      </span>
      {% endif %}
      <div class="govuk-radios {% if widget.small %}govuk-radios--small{% endif %}">
      {% for group, options, index in widget.optgroups %}
        {% for option in options %}
          {% include option.template_name with widget=option %}
        {% endfor %}
      {%endfor %}
      </div>
  </fieldset>
</div>
{% endwith %}
